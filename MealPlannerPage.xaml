<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Montealegre_Sofia_RecipeDiscover.MealPlannerPage"
             Title="">
	<ContentPage.Resources>
		<ResourceDictionary>
			<LinearGradientBrush x:Key="BackgroundGradient" StartPoint="0,0" EndPoint="1,1">
				<GradientStop Color="#667eea" Offset="0.0" />
				<GradientStop Color="#764ba2" Offset="1.0" />
			</LinearGradientBrush>
		</ResourceDictionary>
	</ContentPage.Resources>

	<Grid Background="{StaticResource BackgroundGradient}" Padding="20">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<!-- Title -->
		<Label Grid.Row="0"
               Text="Weekly Meal Planner"
               FontSize="32"
               FontAttributes="Bold"
               TextColor="White"
               HorizontalOptions="Center"
               Margin="0,0,0,20"/>

		<!-- Carousel View -->
		<CarouselView Grid.Row="1"
                      ItemsSource="{Binding Days}"
                      IndicatorView="indicatorView"
                      PeekAreaInsets="40">
			<CarouselView.ItemTemplate>
				<DataTemplate>
					<Border BackgroundColor="White"
                            StrokeThickness="0"
                            Padding="30"
                            Margin="10"
                            StrokeShape="RoundRectangle 20">
						<Border.Shadow>
							<Shadow Brush="Black"
                                    Offset="0,10"
                                    Radius="20"
                                    Opacity="0.3"/>
						</Border.Shadow>

						<ScrollView>
							<VerticalStackLayout Spacing="20">

								<!-- Day Header -->
								<VerticalStackLayout Spacing="5">
									<Label Text="{Binding DayName}"
                                           FontSize="36"
                                           FontAttributes="Bold"
                                           TextColor="#667eea"
                                           HorizontalOptions="Center"/>
									<Label Text="{Binding DateInfo}"
                                           FontSize="14"
                                           TextColor="#666"
                                           HorizontalOptions="Center"/>
									<BoxView HeightRequest="3"
                                             BackgroundColor="#667eea"
                                             HorizontalOptions="Fill"
                                             Margin="0,10,0,0"/>
								</VerticalStackLayout>

								<!-- Breakfast -->
								<VerticalStackLayout Spacing="8"
													 IsVisible="{Binding ShowBreakfast}">
									<Label Text="ðŸ³ Breakfast"
                                           FontSize="18"
                                           FontAttributes="Bold"
                                           TextColor="#764ba2"/>
									<Border Stroke="#e0e0e0"
                                            StrokeThickness="2"
                                            BackgroundColor="White"
                                            StrokeShape="RoundRectangle 10">
										<Grid ColumnDefinitions="*,Auto" Padding="5">
											<Picker Grid.Column="0"
												ItemsSource="{Binding BreakfastOptions}"
												ItemDisplayBinding="{Binding Name}"
												SelectedItem="{Binding Breakfast}"
												FontSize="16"
												TextColor="#333"/>
										</Grid>
									</Border>
								</VerticalStackLayout>

								<!-- Lunch -->
								<VerticalStackLayout Spacing="8" 
													 IsVisible="{Binding ShowLunch}">
									<Label Text="ðŸ¥— Lunch"
                                           FontSize="18"
                                           FontAttributes="Bold"
                                           TextColor="#764ba2"/>
									<Border Stroke="#e0e0e0"
                                            StrokeThickness="2"
                                            BackgroundColor="White"
                                            StrokeShape="RoundRectangle 10">
										<Grid ColumnDefinitions="*,Auto" Padding="5">
											<Picker Grid.Column="0"
                                                    ItemsSource="{Binding LunchOptions}"
													ItemDisplayBinding="{Binding Name}"
                                                    SelectedItem="{Binding Lunch}"
                                                    FontSize="16"
                                                    TextColor="#333"/>
										</Grid>
									</Border>
								</VerticalStackLayout>

								<!-- Dinner -->
								<VerticalStackLayout Spacing="8"
													IsVisible="{Binding ShowDinner}">
									<Label Text="ðŸ Dinner"
                                        FontSize="18"
                                        FontAttributes="Bold"
                                        TextColor="#764ba2"/>
									<Border Stroke="#e0e0e0"
                                        StrokeThickness="2"
                                        BackgroundColor="White"
                                        StrokeShape="RoundRectangle 10">
										<Grid ColumnDefinitions="*,Auto" Padding="5">
											<Picker Grid.Column="0"
                                                ItemsSource="{Binding DinnerOptions}"
												ItemDisplayBinding="{Binding Name}"
                                                SelectedItem="{Binding Dinner}"
                                                FontSize="16"
                                                TextColor="#333"/>
										</Grid>
									</Border>
								</VerticalStackLayout>

								<!-- Snacks -->
								<VerticalStackLayout Spacing="8"
													IsVisible="{Binding ShowSnacks}">
									<Label Text="ðŸŽ Snacks"
                                        FontSize="18"
                                        FontAttributes="Bold"
                                        TextColor="#764ba2"/>
									<Border Stroke="#e0e0e0"
                                        StrokeThickness="2"
                                        BackgroundColor="White"
                                        StrokeShape="RoundRectangle 10">
										<Grid ColumnDefinitions="*,Auto" Padding="5">
											<Picker Grid.Column="0"
                                                ItemsSource="{Binding SnacksOptions}"
												ItemDisplayBinding="{Binding Name}"
                                                SelectedItem="{Binding Snacks}"
                                                FontSize="16"
                                                TextColor="#333"/>
										</Grid>
									</Border>
								</VerticalStackLayout>

							</VerticalStackLayout>
						</ScrollView>
					</Border>
				</DataTemplate>
			</CarouselView.ItemTemplate>
		</CarouselView>
		<!-- Indicator View -->
		<IndicatorView x:Name="indicatorView"
                       Grid.Row="2"
                       IndicatorColor="LightGray"
                       SelectedIndicatorColor="White"
                       HorizontalOptions="Center"
                       Margin="0,20,0,0"/>
		<!-- Save Button -->
		<Button Grid.Row="3" 
				Text="Save Week Meals"
				Command="{Binding SaveMealCommand}"
				CommandParameter="{Binding .}"
				FontSize="18"
				FontAttributes="Bold"
				TextColor="White"
				Margin="0,10,0,0"
				HeightRequest="50"
				CornerRadius="10">
				<Button.Background>
					<LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
						<GradientStop Color="DarkSalmon" Offset="0.0" />
						<GradientStop Color="Aquamarine" Offset="1.0" />
					</LinearGradientBrush>
				</Button.Background>
		</Button>
	</Grid>
</ContentPage>